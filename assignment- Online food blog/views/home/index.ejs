<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home</title>
   
    <link rel="stylesheet" type="text/css" href="/css/style.css">
	 <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <style>
      
/* home page style start */
.horizontal-center {
  text-align: center;
}
.table {
  display: table;
}
.table-row {
  display: table-row;
}
.vertical-center {
  position: relative;
  display: table-cell;
  vertical-align: middle;
}

/* Navbar */
#navbar {
  margin-bottom: 0;
  font-family: "ubuntu";
}

/* Page title */
.bg {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
}
.bg img {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: auto;
  min-width: 50%;
  min-height: 50%;
}
#page-title {
  position: relative;
  width: 100%;
  color: white;
  background-color: #1f4a6f;
  font-family: "ubuntu";
  overflow: hidden;
}
#title-image {
  filter: alpha(opacity=80);
  opacity: 0.8;
  -moz-opacity: 0.8;
}
#page-title .container {
  min-height: 350px;
  display: table;
}
#page-title .article-title,
#page-title .article-subtitle {
  text-shadow: 0px 0px 40px black;
}

/* Article */
article {
  font-family: "roboto";
  font-size: 1.1em;
}
article h2,
article h3 {
  font-family: "ubuntu";
}
.author {
  margin-top: 0px;
  margin-bottom: 15px;
}
.author a {
  color: rgb(223, 19, 19);
}

.author-image {
  margin-right: 10px;
  -webkit-border-radius: 100%;
  -moz-border-radius: 100%;
  border-radius: 100%;
}
.author-name {
  font-size: 1.3em;
}
.col-sm-10 {
    margin-left: -57px;
}

/* Pager */
.pager {
  font-family: "ubuntu";
}

/* Footer */
footer {
  background-color: #1f4a6f;
  padding-bottom: 40px;
  margin-bottom: 0;
  color: white;
  font-family: "roboto";
}
footer h2,
footer h3 {
  font-family: "ubuntu";
}
footer a {
  color: #70a7d7;
}
footer a:hover {
  color: #337ab7;
}

/* Social Button List */
.social-cont {
  margin-top: 20px;
}

/* Image List */
.image-list {
  list-style: none;
  padding-left: 0;
}
.image-list li {
  padding-bottom: 5px;
  display: table-row;
}
.image-list img {
  width: 40px;
  height: 40px;
}
.image-list .vertical-center {
  padding-bottom: 6px;
}

/* Tag List */
.tag-cont .btn {
  margin-right: 4px;
  margin-bottom: 7px;
  color: #333;
}
.tag-cont .btn:hover {
  background-color: #eee;
}
.color-white{
  color: azure;
  text-decoration: none !important;
}
.horizontal-center.vertical-center {
    background-color: #131d28b8;
}
.restaurant-list{
  height: 100vh;
}
a{
  text-decoration: none !important;
}

.search {
  width: 100%;
  position: relative;
  display: flex;
}

.searchTerm {
    width: 100%;
    border: 3px solid #00B4CC;
    border-right: none;
    padding: 5px;
    height: 36px;
    border-radius: 5px 0 0 5px;
    outline: none;
    color: #9DBFAF;
}

.searchTerm:focus{
  color: #00B4CC;
}

.searchButton {
  width: 40px;
  height: 36px;
  border: 1px solid #00B4CC;
  background: #00B4CC;
  text-align: center;
  color: #fff;
  border-radius: 0 5px 5px 0;
  cursor: pointer;
  font-size: 20px;
}
.wrap {
  position: relative;
    width: 45%;
    height: 10px;
    right: -300px;
}
div#output {
    margin-top: -20px;
}
 #output a {
    color: #f8f8f8;
    text-decoration: none;
    background-color: transparent;
    font-weight: 500;
    font-size: larger;
}
.searchresult {
    background-color: #31bab166;
    margin-left: 27%;
    width: 463px;
    height: 40px;
}
.post-preview {
    margin-bottom: -4px;
}
.post-preview p {
    margin-bottom: 0px;
}
    </style>
  </head>
  
    <body>
       
<div id="navbar" class="navbar navbar-default navbar-page-title">
  <div class="container">
    <div class="navbar-header">
      <a class=" color-white navbar-brand" href="#"><i class="fa fa-cutlery"></i> Online Food Blog</a>
      <a class="mr-2 color-white" href="/">Home</a>
       <a class="mr-2 color-white" href="/foodexperience">Food Experience</a>
       <% if(role=='admin'){  %>
        <a class="mr-2 color-white" href="/admin">My Account</a>

     <%  } else if(role=='user'){  %>
        <a class="mr-2 color-white" href="/user">My Account</a>
    <% }else{  %>
        <a class="mr-2 color-white" href="/login">Login</a>
        <a class="mr-2 color-white" href="/signup">Sign Up</a>
   <% }  %>
      
      
    </div>
   
  </div>
</div>

<header id="page-title" class="jumbotron background">
  <div id="title-image" class="bg">
    <img src="/image/headerpic.jpg" alt="food_blog">
  </div>
  <div class="container">
    <div class="horizontal-center vertical-center">
      <h1 class="article-title">Share your experience &</h1>
      <h2 class="article-subtitle">Get latest review of all restaurant</h2>
    </div>
  </div>
</header>
<section class="container restaurant-list">
  
    <div class="wrap mb-5 ">
      <div class="search">
         <input id="search1" type="text" class="searchTerm" placeholder="What are you looking for?">
         <button id="search" type="submit" class="searchButton">
           <i class="fa fa-search"></i>
        </button>
      </div>

     
   </div>

   <div id="output"> </div>

  
  <div class="mt-5">
    <h3>Restaurant List for you</h3>
  </div>

  <div>
    
<% restaurants.forEach( function(restaurant){ %>
  <div class="container foreground">
    <article class="article-preview">
      <div class="row">
        <div class="col-sm-2">
          <a href="/restaurant/<%= restaurant.id %>"><img src="/image/<%= restaurant.image %>" width="90px" height="85px" alt="restaurant_pic"></a>
        </div>
        <div class="mb-2 col-sm-10">
          <div class="post-preview">
            <p>Name: <%= restaurant.name %> </p>
            <p>Location: <%= restaurant.location %></p></div>
          <div class="author">
            <a href="/restaurant/<%= restaurant.id %>">
             <span class="author-name">View</span>
            </a>
          </div>
        </div>
      </div>
    </article>
  </div>
  <%  }); %>
  </div>

</section>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>


    <script>
      $(document).ready(function(){
        $("#search1").keyup(function(){
        var query = $(this).val();
         
          if (query != "") {
            $.ajax({
              url: '/search',
              method: 'POST',
             
              data: {query:query},
              success: function(response){
                $("#output").empty(); 
                response.forEach(myFunction);
                  //alert(response);
                function myFunction(result) {
    
                document.getElementById("output").innerHTML +=' <div class="searchresult"> <a href="/restaurant/'+result.id+'   ">' +result.name +'</a>'+ '<div>' +" <br>"; 
                
            }
             
                $('#output').css('display', 'block');
 
                $("#search").focusout(function(){
                    $('#output').css('display', 'none');
                    // $("#output").empty(); 
                });
                $("#search").focusin(function(){
                    $('#output').css('display', 'block');
                });
              }
            });
          } else {
          $('#output').css('display', 'none');
        }
      });

      });
      
    </script>
      </body>
</html>